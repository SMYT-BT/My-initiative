# lecture11:講義概要
## 【概要】
前回インフラ環境の自動構築ツールとして、CloudFormationを学習したが本講座にて他のツールについて学習する。
CloudFormationの不足点を知り、補うための他ツール。また、構築した環境のテストをどのように行うかを学んでいく。

## ○CloudFormation を比較
- YAML 形式で作成する為、比較的容易に記載が可能で、導入のハードルも高くはない。
- しかし、YAML は「記法」となる為、プログラミングのような分岐処理や繰り返し処理の記述はできない。
- 同じ構成を作成する際、部分的なコピーで事足りる（DRY(Don’t RepeatYourself)原則に反する）

## ○インフラのコード化支援ツール
### ●Terraform
- 現時点でこのツールが一番使われていると思われる。
- リソースの記述は独自言語(HCL)で行う。

### ●Pulumi
- 特徴として記述に複数の言語が対応していること。
- アプリケーション開発エンジニアがそのまま馴染みのある言語を使ってインフラのコード化を実装する、というケースに有効。
- Pulumi Crosswalk といった各種クラウドインフラのベストプラクティスを容易に実装できるライブラリが存在する。

### ●AWS CDK
- 対応は AWS のみではある。
- 複数のプログラミング言語で記述が可能。
- コードから CloudFormation テンプレートが生成され、実際の作成処理はCloudFormation で行われる。

## ○インフラのテスト
- 基本的にプログラムのテストと同様である。
- 実行の方法なども含めてプログラムのテストとほぼ同様に行う事が可能である。
- 確認として、「サーバーが起動しているかどうか」や「ネットワークのポートが開いているかどうか」などである

### ▲意識すべきこと
- 「仕様通り」であるかどうか。

※テストを設計するためのインプットは「要件」「設計書」などがベースになる
「インフラ構成図」や「ネットワーク構成図」などを元にテスト。


## ○テスト駆動開発(TestDrivenDevelopment:TDD)
- テストありきで開発する方法。
- 設計に基づいて製品を開発する(プロダクトの開発)のではなく、まずは設計に基づいて製品の仕様を満たす条件を確認するテストを先に作成するという手法。
- 品質を高める為にリファクタリングによって振る舞いを変えずにプログラムの整形を行う。これを何度も繰り返す事で納品へと進む。

## ○ServerSpec
- Ruby で作成されたインフラ環境をテストする為のテスティングフレームワーク。
- RSpec（Ruby で作られたテスティングフレームワーク） の機能を活用して作られている。
- サーバーに対して特定のモジュールがインストールされているか・ポートが開いているか・任意のファイルが存在するか、といったサーバーの環境構成に関わるテストを記述できる。
- テストコードというプログラムで書かれたものを用意し、プログラムとしてテストを実行する。
- 一度作成したテストコードは何度実行しても同じ結果になることを保証する。
- テストの内容が膨大であっても高速で完了する。
- テスト項目は自身で検討・作成する必要がある。