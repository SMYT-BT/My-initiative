# lecture12:講義概要
## 【概要】
インフラ自動構築ツール Terraform と CI / CD ツールについて触れていく。  
前回学習したTerraformの構文の概要を学習し、おおよその記述内容を理解できるようにする。
加え自動化ツールが開発環境に近しいことから、開発と運用を統合したDevOpsの在り方を知る。

  
## ○Terraform

※Terraformについては以下にまとめる  
![Terraformについて](https://github.com/SMYT-BT/My-initiative/blob/main/OnlineSchool_Raisetech/%E5%AD%A6%E7%BF%92%E3%83%8E%E3%83%BC%E3%83%88/4_terraform%E3%81%AE%E5%AD%A6%E7%BF%92%E8%A8%98%E9%8C%B2/%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88/%E5%AD%A6%E7%BF%92%E3%83%8E%E3%83%BC%E3%83%88.md)

## ○DevOps
- 名の通り「開発(Dev)」と「運用(Ops)」を組み合わせた言葉。
### 前提
- 今まで対立構造になりやすかった開発チームと運用チームのライフサイクルを一緒にし、協力関係にする事でよりビジネス価値を高めやすい開発と運用を行う為の技術や行動の総称を指す。

※対立構造について
開発チーム：新機能の追加やパッチによる頻繁な更新を良しとする
運用チーム：安定的な稼働を求め、安易に新機能の追加や更新を良しとしない

- 非常に技術の範囲が広い上、求められる知見も広くなるため、厳密に DevOps はここからここまで、と言いにくいのが現状。

### 始め方
- まず今まで開発、運用と分かれていたチームは統合する。
- 開発時には運用考慮をした実装、環境の構築を行う。
- 運用時は得られた知見や分析結果をリアルタイムで開発メンバー含めて共有できるようにする。

### 日便改善体制
- 運用面  
情報をリアルタイムで共有する為の Slack 活用や、Bot ツールによる運用サポート。  
問題発生時のアラート通知、SNS 通知、自動アクション、監視・分析ツールとその支援。  


- 開発面  
インフラ環境、ビルドやデプロイの各種自動化やダウンタイムをゼロにする仕組みの構築。  
運用を安定化する為のシステム設計、レプリケーション機能の構築、冗長化構成の実現、自動バックアップや復旧の自動化。  

## ○CI/CD ツール
- 「Continuous Integration/Continuous Delivery」の略称では「継続的インテグレーション」「継続的デリバリー」ともいう。

### CI(継続的インテグレーション)  
具体的にはアプリケーションやインフラ環境のコードに関わる部分のテストを自動化し、常にリリ
ース可能な状態にする。

### CD(継続的デリバリー)
リリース可能にするだけではなく、リリースまで行うケースもある。  
CI と CD はやる事や目的はほぼ同一で、何処までやるかだけが違う。  

### 基本的な機能
- ジョブ機能  
定形作業を自動化した小さな単位＝ジョブとする。  
- トリガー機能  
ジョブはただ実行されるだけではなく、トリガーを設定することで「前のジョブが完了次第実行」「指定の時間が来たら定期的に実行」など、起動条件を詳細に指定できる。
- パイプライン機能  
上記の機能を一連の流れ（パイプライン）とすることで、呼び出すときの記述が容易になり動きの可視化ができる。  

### 手動 or 自動  
- CI/CD ツールを実行をするには「手動」か「自動」か選べる。
- 継続的な価値提供、という目線で考えた時、イベントトリガーを用いて自動実行することが多い。
- CI/CD 共に手順が複雑になっている場合はビルドパイプラインを構築し、順番に処理させる事でビルドを自動化するとよい。
  

### ツール紹介
- Jenkins  
カスタマイズ性が高く、さまざまなシチュエーションに応えられるその機能性が評価されていた。
インターネットにつながっている環境だと CircleCI や GitHub Actionsのほうが扱いやすい、かつサーバーの管理も不要なため、少なくとも AWS をベースとしたシステムにおいては導入しないことが多い。
  
- CircleCI  
SaaS 型の CI/CD ツール、というよりは CI/CD サービス。環境構築のコストも低く、手軽に導入できる。
スケーリングが自動でされ、無料枠も用意されている。
  
- GitHub Actions
GitHub で提供している CI ツール。無料枠もある。  
ランナーという実行環境が提供されており、このランナーは自分で用意することもできる。
ワークフローの実行回数が多いとランナー利用料が発生するため、実行数の多いプロジェクトの場合は自身で用意したほうが低コスト。

- AWS CodeBuild
  
以下サイトにて詳細を記載。
[CodeBuildについて](https://kakuya07218.xsrv.jp/aws.cloudmemo/2024/01/17/%e9%96%8b%e7%99%ba%ef%bc%88dev%ef%bc%89%e3%82%b5%e3%83%bc%e3%83%93%e3%82%b9/#CodeBuild)
